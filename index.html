<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <link rel="stylesheet" href="css/styles.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
</head>

<body>
    <div class="viewport">
        <div class="phone-container">
            <div class="phone-screen">
                <div class="power-button"></div>
                <div class="volume-button-1"></div>
                <div class="volume-button-2"></div>
                <div class="notch"></div>

                <div class="status-left hide-on-swipe">
                    <div class="time"></div>
                </div>
                <div class="status-right hide-on-swipe">
                    <div class="data">
                        <svg width="35" height="23" viewBox="0 0 35 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="0.957031" y="14.718" width="6.11068" height="7.33282" rx="1.8332" fill="#A2A2A2"/>
                            <rect x="10.1228" y="9.82942" width="6.11068" height="12.2214" rx="1.8332" fill="#A2A2A2"/>
                            <rect x="19.2886" y="4.94087" width="6.11068" height="17.1099" rx="1.8332" fill="#A2A2A2"/>
                            <rect x="28.4548" y="0.05233" width="6.11068" height="21.9984" rx="1.8332" fill="#A2A2A2"/>
                        </svg>
                    </div>
                    <div class="wifi">
                        <svg width="28" height="22" viewBox="0 0 28 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14.0757 21.9027L27.8467 5.03499C27.3139 4.6392 22.0092 0.378613 14.0639 0.378613C6.10676 0.378613 0.813849 4.6392 0.281006 5.03499L14.052 21.9027L14.0639 21.9143L14.0757 21.9027Z" fill="#A2A2A2" />
                        </svg>
                    </div>
                    <div class="battery">
                        <svg width="40" height="21" viewBox="0 0 40 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M35.847 18.1407V14.8319H39.8096V6.90676H35.847V3.59801C35.847 2.15167 34.6582 0.962902 33.2119 0.962902H2.83875C1.37259 0.962902 0.183819 2.15167 0.183819 3.59801V18.1209C0.183819 19.587 1.37259 20.7758 2.81893 20.7758H33.2119C34.6582 20.7758 35.847 19.587 35.847 18.1407Z" fill="#A2A2A2" />
                        </svg>
                    </div>
                </div>

                <div class="line hide-on-swipe"></div>


                <div class="messages-date hide-on-swipe">
                    <div class="date-background"></div>
                    <div class="date-text"></div>
                </div>

                <div class="conversation-header hide-on-swipe">
                    <span class="conversation-header-text">You have joined the conversation.</span>
                </div>



                <div class="messages-container hide-on-swipe">

                    <div class="message left">
                        <div class="message-bubble left">
                            <div class="typing-indicator">
                                <div class="typing-dot left"></div>
                                <div class="typing-dot left"></div>
                                <div class="typing-dot left"></div>
                            </div>
                            <div class="message-text left">Welcome to my portfolio.</div>
                            <div class="timestamp-background left">
                                <div class="timestamp left"></div>
                            </div>
                        </div>
                    </div>

                    <div class="message right group-break">
                        <div class="message-bubble right padding-fix">
                            <div class="typing-indicator">
                                <div class="typing-dot right"></div>
                                <div class="typing-dot right"></div>
                                <div class="typing-dot right"></div>
                            </div>

                            <div class="message-text right">I am highly capable in making websites with unique & complex designs <br> <span class="highlighted">like this one.</span> </br> </div>
                            <div class="timestamp-background right">
                                <div class="timestamp right"></div>
                            </div>
                        </div>
                    </div>

                    <div class="message right">
                        <div class="message-bubble right">
                            <div class="typing-indicator">
                                <div class="typing-dot right"></div>
                                <div class="typing-dot right"></div>
                                <div class="typing-dot right"></div>
                            </div>
                            <div class="message-text right">Swipe upwards.</div>
                            <div class="timestamp-background right">
                                <div class="timestamp right"></div>
                            </div>
                        </div>

                    </div>

                    <div class="message left group-break">
                        <div class="message-bubble left">
                            <div class="typing-indicator">
                                <div class="typing-dot left"></div>
                                <div class="typing-dot left"></div>
                                <div class="typing-dot left"></div>
                            </div>
                            <div class="message-text left">Click and drag your mouse upwards to continue.</div>
                            <div class="timestamp-background left">
                                <div class="timestamp left"></div>
                            </div>
                        </div>
                    </div>

                </div>

            </div>
        </div>


        <div class="information-container">
            <div class="information-header">My Skills</div>
            <div class="information-content">
                <ul class="styled-bullets">
                    <li>
                        <span class="info-title">Develop software/web applications</span>
                        <div class="info-text-container">
                            <div class="info-text">I'm able to design interfaces with an emphasis on usability and efficiency</div>
                            <div class="info-text">I can work on a range of devices</div>
                            <div class="info-text">I work in HTML, CSS, JavaScript (with frameworks like Ruby, Angular), Python, Java, C++, C#, Lua</div>
                        </div>
                    </li>
                    <li>
                        <span class="info-title">Build and manage back-end systems</span>
                        <div class="info-text-container">
                            <div class="info-text">I create and maintain databases, servers, and APIS</div>
                            <div class="info-text">I ensure data is secure, consistent, and accessible</div>
                            <div class="info-text">I work with SQL, NoSQL, REST, and authentication systems</div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>

        <div class="scrollbar">
            <div class="scrollbar-thumb"></div>
        </div>


    </div>

    <div class="swipe-transition-phone"></div>
    <div class="opacity-transition"></div>
    <div class="message-bubble-size-transition"></div>

    <audio id="switch-off" preload="auto">
        <source src="sounds/switch_off.mp3" type="audio/mpeg">
    </audio>


<script>
    const isMobile = /Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);


    const phoneScreen = document.querySelector(".phone-screen");
    const messages = phoneScreen.querySelectorAll(".message")
    let introAnimationFinished = false;

    phoneScreen.classList.add("animate-in");                    // Intro animation
    phoneScreen.addEventListener('animationend', () => {
        setTimeout(() => {
            phoneScreen.querySelector(".messages-date").classList.add("opacity-transition");
            setTimeout(() => {
                phoneScreen.querySelector(".conversation-header").classList.add("opacity-transition");

                setTimeout(() => {
                    for (let i = 0; i < messages.length; i++) {
                        let timeDelay = (i === 2) ? 8000 : (i === 3) ? 18000 : i * 3000;            // Variable timings for each message (begin typing)
                        setTimeout(() => {
                            const messageBubble = messages[i].querySelector(".message-bubble");
                            const messageText = messageBubble.querySelector(".message-text");
                            const maxHeight =
                                (i === 0) ? 30 :
                                (i === 1) ? 100 :
                                (i === 2) ? 26 :
                                (i === 3) ? 100 : 40;  // replace with auto-calculated transition, or remake layout to allow for ease in transition (currently not convenient)


                            if (i === 3) {
                                if (isMobile) {
                                    messageText.innerText = "Drag your finger upwards to continue.";
                                }
                            }

                            messageBubble.classList.add("typing-transition");                       // Add typing indicator
                            messages[i].classList.add("opacity-transition", "typing-transition");


                            setTimeout(() => {                                      // Remove typing indicator - Transition to actual text
                                messageText.style.visibility = "visible";
                                messages[i].classList.remove("typing-transition");
                                messageBubble.classList.remove("typing-transition");
                                messageBubble.querySelector(".typing-indicator").remove();

                                messageBubble.classList.add("message-bubble-size-transition");
                                messageBubble.style.maxHeight = maxHeight + "px";

                                setTimeout(() => {
                                    messageText.classList.add("message-text-transition");
                                }, 500)
                            }, 2000)




                            if (i === 2)
                                introAnimationFinished = true;
                        }, timeDelay);
                    }
                }, 2000)



            }, 650);
        }, 450);
        phoneScreen.classList.remove('animate-in');
    });






    const d = new Date().toLocaleString("en-US", {
        weekday: "short",
        month: "short",
        day: "numeric",
    });
    document.querySelector(".date-text").innerHTML = d;

    const t = new Date().toLocaleTimeString("en-US", {
        hour: "numeric",
        minute: "2-digit",
        hour12: false,
    });

    document.querySelector(".time").innerHTML = t;

    const ts = new Date().toLocaleTimeString("en-US", {
        hour: "numeric",
        minute: "2-digit",
    });

    document.querySelectorAll(".timestamp").forEach(el => el.innerHTML = ts);


    let startY = 0;
    let endY = 0;
    let swiped = false;


    const informationContainer = document.querySelector(".information-container");
    const informationHeader = informationContainer.querySelector(".information-header");
    const informationContent = informationContainer.querySelector(".information-content");
    const scrollbar = document.querySelector(".scrollbar");
    const scrollbarThumb = scrollbar.querySelector(".scrollbar-thumb");
    const switchOffSound = document.getElementById("switch-off");


    // Touch support
    phoneScreen.addEventListener("touchstart", function(event) {
        startY = event.changedTouches[0].clientY;
    });

    phoneScreen.addEventListener("touchend", function(event) {
        endY = event.changedTouches[0].clientY;
        handleSwipe();
    });

    // Mouse support
    phoneScreen.addEventListener("mousedown", function(event) {
        startY = event.clientY;
    });

    phoneScreen.addEventListener("mouseup", function(event) {
        endY = event.clientY;
        handleSwipe();
    });

    function handleSwipe() {
        const swipeDistance = startY - endY;
        if (swipeDistance > 100 && swiped === false && introAnimationFinished === true) {
            console.log("swipe up");
            swiped = true;
            phoneScreen.classList.add("swipe-transition-phone");

            setTimeout(() => {
                switchOffSound.play();
                informationHeader.classList.add("opacity-transition");
                setTimeout(() => {
                    informationContent.classList.add("opacity-transition");
                    setTimeout(() => {
                        scrollbar.classList.add("opacity-transition");
                        updateScrollbarThumbPosition();
                    }, 2000);
                }, 200);
            }, 400);

            setTimeout(() => {
                document.querySelectorAll(".hide-on-swipe").forEach(el => el.style.display = "none");
                phoneScreen.style.background = "#050505";
            }, 400);

        }
    }


    function updateScrollbarThumbPosition() {
        const totalSteps = 8;
        let currentTop = 0;
        let currentIndex = 0;
        let isAnimating = false;

        window.addEventListener('wheel', (e) => {
            e.preventDefault();

            if (isAnimating) return;

            const maxTop = scrollbar.offsetHeight - scrollbarThumb.offsetHeight;

            if (Math.abs(e.deltaY) > 0) {
                currentTop += (maxTop / totalSteps) * Math.sign(e.deltaY); // Calculate the value of the current position
                currentTop = Math.max(Math.min(currentTop, maxTop), 0);
                currentIndex = Math.round(currentTop / (maxTop / totalSteps)); // Calculate the current index of the scroll thumb, by dividing the current value with the scale.
                console.log(currentIndex);

                scrollbarThumb.style.top = currentTop + "px";

                if (currentIndex === 1) {
                    isAnimating = true;

                }

            }

        })
    }




</script>






</body>
</html>
